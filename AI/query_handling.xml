<mxfile host="app.diagrams.net">
  <diagram id="AUTOSAR_Chatbot_Query_Handling" name="AUTOSAR Chatbot Query Handling">
    <mxGraphModel dx="1500" dy="1000" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- User Query -->
        <mxCell id="userquery" value="User Query" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4" vertex="1" parent="1">
          <mxGeometry x="300" y="20" width="140" height="40" as="geometry"/>
        </mxCell>

        <!-- Preprocessing -->
        <mxCell id="preprocessing" value="Preprocessing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC" vertex="1" parent="1">
          <mxGeometry x="300" y="80" width="140" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" parent="1" source="userquery" target="preprocessing">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Intent Classification -->
        <mxCell id="intent" value="Intent Classification" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8CECC" vertex="1" parent="1">
          <mxGeometry x="300" y="140" width="160" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="arrow2" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" parent="1" source="preprocessing" target="intent">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Hybrid Retrieval Module -->
        <mxCell id="hybrid" value="Hybrid Retrieval Module" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DAE8FC" vertex="1" parent="1">
          <mxGeometry x="300" y="200" width="200" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="arrow3" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" parent="1" source="intent" target="hybrid">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Keyword Search -->
        <mxCell id="keyword" value="Keyword Search: ElasticSearch / MongoDB" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7" vertex="1" parent="1">
          <mxGeometry x="60" y="260" width="240" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="arrow4" style="edgeStyle=elbowEdgeStyle;endArrow=block;" edge="1" parent="1" source="hybrid" target="keyword">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Semantic Search -->
        <mxCell id="semantic" value="Semantic Search: ChromaDB / FAISS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7" vertex="1" parent="1">
          <mxGeometry x="540" y="260" width="240" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="arrow5" style="edgeStyle=elbowEdgeStyle;endArrow=block;" edge="1" parent="1" source="hybrid" target="semantic">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Context Aggregation -->
        <mxCell id="context" value="Context Aggregation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8CECC" vertex="1" parent="1">
          <mxGeometry x="300" y="320" width="180" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="arrow6a" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" parent="1" source="keyword" target="context">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="arrow6b" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" parent="1" source="semantic" target="context">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Prompt Assembly -->
        <mxCell id="prompt" value="Prompt Assembly" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC" vertex="1" parent="1">
          <mxGeometry x="300" y="380" width="140" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="arrow7" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" parent="1" source="context" target="prompt">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Transformer LLM -->
        <mxCell id="llm" value="Transformer LLM" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DAE8FC" vertex="1" parent="1">
          <mxGeometry x="300" y="440" width="160" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="arrow8" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" parent="1" source="prompt" target="llm">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Response -->
        <mxCell id="response" value="Response" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4" vertex="1" parent="1">
          <mxGeometry x="300" y="500" width="140" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="arrow9" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" parent="1" source="llm" target="response">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- User -->
        <mxCell id="user" value="User" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8CECC" vertex="1" parent="1">
          <mxGeometry x="300" y="560" width="140" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="arrow10" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" parent="1" source="response" target="user">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
